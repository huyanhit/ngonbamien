document.getElementById("scroll-top");const u=new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"});let r=null;window.onscroll=function(){p(),f()};_();function p(){const t=document.getElementById("box-contain"),e=document.getElementById("box-tv");if(t!==null&&e!==null){const a=t.offsetTop-100,s=t.offsetHeight+t.offsetTop-e.offsetHeight-100;window.pageYOffset>a&&window.pageYOffset<s?(t.classList.add("top"),t.classList.remove("bot")):window.pageYOffset>s?(t.classList.add("bot"),t.classList.remove("top")):(t.classList.remove("bot"),t.classList.remove("top"))}}function f(){const t=document.getElementById("header-fixed");if(t){const e=t.offsetTop;window.pageYOffset>e?t.classList.add("sticky"):t.classList.remove("sticky")}}function _(){r==null?$.ajax({type:"GET",url:"/cart",contentType:"application/json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done(function(t){r=t,m()}):setTimeout(function(){m()},10)}function m(){let t='<table class="table border-1"><tr class="bg-cyan-700 text-white"><th width="20%" class="text-center">Hinh ảnh</th><th width="30%">Tên sản phẩm</th><th width="10%" class="text-center">Số lượng</th><th width="10%" class="text-center">Giá</th><th width="20%" class="text-center">Lựa chọn</th><th width="10%" class="text-center">Xoá</th></tr>',e=r.items;for(const a in e){let s="",i=e[a].options;i.title&&(s=i.group_title+": "+i.title),t+='<tr class="align-middle"><td class="text-center"><a href="'+e[a].extra_info.link+'"><img class="inline-block w-[100px]" alt="'+e[a].title+`" onerror="this.src='/images/no-image.png'" src="/admin/get-image-thumbnail/`+e[a].extra_info.image_id+'"/><a></td><td><a class="text-cyan-600" href="'+e[a].extra_info.link+'">'+e[a].title+`<a></td><td class="text-center"><input onblur="updateCart(this, '`+e[a].hash+`')" type="number" value="`+e[a].quantity+'"></td><td class="text-center">'+u.format(e[a].price)+' </td><td class="text-center">'+s+`</td><td class="text-center"><a class="flex-auto cursor-pointer" onclick="removeCart('`+e[a].hash+"','"+e[a].title+`')"><i class="bi bi-x-circle text-red-600"></i> </a></td></tr>`}t+='<tr class="font-bold bg-cyan-700 text-white"><td class="text-center"> Tổng cộng </td><td></td><td class="text-center">'+r.quantities_sum+'</td><td class="text-center"><span class="text-red-600">'+u.format(r.subtotal)+"</span></td><td></td><td></td></tr>",t+="</table>",$(".my-cart").html(t),$("#cart-number").html(r.quantities_sum),$("#total-pill").html(u.format(r.subtotal-parseInt($("#coupon-down").text())))}function h(t,e){var a=6,s=$(t).clone();$(s).css({position:"absolute",top:$(t).offset().top+"px",left:$(t).offset().left+"px",opacity:1,"z-index":1e3}),$("body").append($(s));var i=$(e).offset().left+$(e).width()/2-$(t).width()/a/2,l=$(e).offset().top+$(e).height()/2-$(t).height()/a/2;$(s).animate({opacity:.4,left:i,top:l,width:$(t).width()/a,height:$(t).height()/a},700,function(){$(e).fadeOut("fast",function(){$(e).fadeIn("fast",function(){$(s).fadeOut("fast",function(){$(s).remove()})})})})}(function(t){t("#slider").nivoSlider({effect:"fade",animSpeed:500,pauseTime:4e3,startSlide:0,directionNav:!1,controlNav:!1,controlNavThumbs:!1,pauseOnHover:!1}),t(".add-cart").on("click",function(){var n=t(this).parents(".product_item").find("img").eq(0);h(t(n),t(".cart_anchor"))}),t(window).on("load",function(){if(t(".loader").fadeOut(),t("#preloder").delay(200).fadeOut("slow"),t(".featured__controls li").on("click",function(){t(".featured__controls li").removeClass("active"),t(this).addClass("active")}),t(".featured__filter").length>0){var n=document.querySelector(".featured__filter");mixitup(n)}}),t(".set-bg").each(function(){var n=t(this).data("setbg");t(this).css("background-image","url("+n+")")}),t(".humberger__open").on("click",function(){t(".humberger__menu__wrapper").addClass("show__humberger__menu__wrapper"),t(".humberger__menu__overlay").addClass("active"),t("body").addClass("over_hid")}),t(".humberger__menu__overlay").on("click",function(){t(".humberger__menu__wrapper").removeClass("show__humberger__menu__wrapper"),t(".humberger__menu__overlay").removeClass("active"),t("body").removeClass("over_hid")}),t(".mobile-menu").slicknav({prependTo:"#mobile-menu-wrap",allowParentLinks:!0}),t(".categories__slider").owlCarousel({loop:!0,margin:0,items:4,dots:!1,nav:!0,navText:["<span class='fa fa-angle-left'><span/>","<span class='fa fa-angle-right'><span/>"],animateOut:"fadeOut",animateIn:"fadeIn",smartSpeed:1200,autoHeight:!1,autoplay:!0,responsive:{0:{items:1},480:{items:2},768:{items:3},992:{items:4}}}),t(".hero__categories__all").on("click",function(){t(".hero__categories ul").slideToggle(400)}),t(".latest-product__slider").owlCarousel({loop:!0,margin:0,items:1,dots:!1,nav:!0,navText:["<span class='fa fa-angle-left'><span/>","<span class='fa fa-angle-right'><span/>"],smartSpeed:1200,autoHeight:!1,autoplay:!1}),t(".product__discount__slider").owlCarousel({loop:!0,margin:0,items:3,dots:!1,smartSpeed:1200,autoHeight:!1,autoplay:!0,responsive:{320:{items:1},480:{items:2},768:{items:2},992:{items:3}}}),t(".product__details__pic__slider").owlCarousel({loop:!0,margin:20,items:4,dots:!0,smartSpeed:1200,autoHeight:!1,autoplay:!0});var e=t(".price-range"),a=t("#minamount"),s=t("#maxamount"),i=e.data("min"),l=e.data("max");e.slider({range:!0,min:i,max:l,values:[i,l],slide:function(n,o){a.val(o.values[0]+"k"),s.val(o.values[1]+"k")}}),a.val(e.slider("values",0)+"k"),s.val(e.slider("values",1)+"k"),t("select").niceSelect(),t(".product__details__pic__slider img").on("click",function(){var n=t(this).data("imgbigurl"),o=t(".product__details__pic__item--large").attr("src");n!=o&&t(".product__details__pic__item--large").attr({src:n})});var c=t(".pro-qty");c.prepend('<span class="dec qtybtn">-</span>'),c.append('<span class="inc qtybtn">+</span>'),c.on("click",".qtybtn",function(){var n=t(this),o=n.parent().find("input").val();if(n.hasClass("inc"))var d=parseFloat(o)+1;else if(o>0)var d=parseFloat(o)-1;else d=0;n.parent().find("input").val(d)})})(jQuery);
