document.getElementById("scroll-top");const d=new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}),m={id:0,quantity:1,options:{}};let r=null;window.onscroll=function(){f(),_()};p();function f(){const t=document.getElementById("box-contain"),e=document.getElementById("box-tv");if(t!==null&&e!==null){const a=t.offsetTop-100,s=t.offsetHeight+t.offsetTop-e.offsetHeight-100;window.pageYOffset>a&&window.pageYOffset<s?(t.classList.add("top"),t.classList.remove("bot")):window.pageYOffset>s?(t.classList.add("bot"),t.classList.remove("top")):(t.classList.remove("bot"),t.classList.remove("top"))}}function _(){const t=document.getElementById("header-fixed");if(t){const e=t.offsetTop;window.pageYOffset>e?t.classList.add("sticky"):t.classList.remove("sticky")}}function p(){r==null?$.ajax({type:"GET",url:"/cart",contentType:"application/json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done(function(t){r=t,u()}):setTimeout(function(){u()},10)}function h(){return p(),'<div> <div class="text-lg font-bold text-center mb-2">Giỏ hàng</div><div class="my-cart">Loading...</div><div class="text-right"><a id="close-cart" class="btn px-2 mr-2 rounded-2 bg-cyan-500 text-white hover:bg-cyan-700 text-sm"><i class="bi bi-x-circle"></i> Đóng </a><a class="btn px-2 rounded-2 bg-red-500 text-white hover:bg-red-600 text-sm" href="/dat-hang"><i class="bi bi-cart"></i> Đặt hàng </a></div></div>'}function u(){let t='<table class="table border-1"><tr class="bg-cyan-700 text-white"><th width="20%" class="text-center">Hinh ảnh</th><th width="30%">Tên sản phẩm</th><th width="10%" class="text-center">Số lượng</th><th width="10%" class="text-center">Giá</th><th width="20%" class="text-center">Lựa chọn</th><th width="10%" class="text-center">Xoá</th></tr>',e=r.items;for(const a in e){let s="",o=e[a].options;o.title&&(s=o.group_title+": "+o.title),t+='<tr class="align-middle"><td class="text-center"><a href="'+e[a].extra_info.link+'"><img class="inline-block w-[100px]" alt="'+e[a].title+`" onerror="this.src='/images/no-image.png'" src="/admin/get-image-thumbnail/`+e[a].extra_info.image_id+'"/><a></td><td><a class="text-cyan-600" href="'+e[a].extra_info.link+'">'+e[a].title+`<a></td><td class="text-center"><input onblur="updateCart(this, '`+e[a].hash+`')" type="number" value="`+e[a].quantity+'"></td><td class="text-center">'+d.format(e[a].price)+' </td><td class="text-center">'+s+`</td><td class="text-center"><a class="flex-auto cursor-pointer" onclick="removeCart('`+e[a].hash+"','"+e[a].title+`')"><i class="bi bi-x-circle text-red-600"></i> </a></td></tr>`}t+='<tr class="font-bold bg-cyan-700 text-white"><td class="text-center"> Tổng cộng </td><td></td><td class="text-center">'+r.quantities_sum+'</td><td class="text-center"><span class="text-red-600">'+d.format(r.subtotal)+"</span></td><td></td><td></td></tr>",t+="</table>",$(".my-cart").html(t),$("#cart-number").html(r.quantities_sum),$("#total-pill").html(d.format(r.subtotal-parseInt($("#coupon-down").text())))}function v(t,e,a=""){m.id=e.id;let s=$(t).html();$(t).html('<div class="spinner-border h-[15px] w-[15px]"></div>'),$.ajax({type:"POST",url:"/cart",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:m}).done(function(o){$(t).html(s),r=o,u(),a!==""&&(window.location.href="/"+a)}).error(function(){$(t).html(s)})}$(document).ready(function(){$(document).on("click","#close-cart",function(){$('[data-toggle="popover"]').popover("hide")}),$("[data-toggle=popover]").popover({html:!0,container:".cart-container",offset:"0 -100px",content:function(){return h()}}),$("[data-toggle=popover-compare]").popover({html:!0,container:".search-compare",content:function(){return getProductCompare("my-cart")}}),$("#slider").nivoSlider({effect:"fade",animSpeed:2e3,pauseTime:4e3,startSlide:0,directionNav:!1,controlNav:!1,controlNavThumbs:!1,pauseOnHover:!1}),$(".service-carousel").owlCarousel({loop:!0,margin:10,dots:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:4}}}),$(".product-carousel").owlCarousel({loop:!0,margin:0,dots:!1,responsive:{0:{items:1},900:{items:2},1e3:{items:3},1200:{items:5}}}),$(".customer-carousel").owlCarousel({loop:!0,dots:!1,margin:0,responsive:{0:{items:2},600:{items:4},1e3:{items:6}}}),$(".select_price_option").click(function(){let t=$(this).attr("data-value");$(".select_price_option").removeClass("active"),$(".product_detail_option").removeClass("active"),$(".product_detail_"+t).addClass("active"),$(".select_price_"+t).addClass("active")}),$(".filter__option_ul").on("click",function(){$(this).addClass("active"),$(".filter__list").addClass("active"),$(".filter__option_grid").removeClass("active")}),$(".filter__option_grid").on("click",function(){$(this).addClass("active"),$(".filter__list").removeClass("active"),$(".filter__option_ul").removeClass("active")}),$(".add_cart").on("click",function(t){t.preventDefault(),v(this,{id:$(this).attr("data-value")})})});$(document).ready(function(){$(window).on("load",function(){if($(".loader").fadeOut(),$("#preloder").delay(200).fadeOut("slow"),$(".featured__controls li").on("click",function(){$(".featured__controls li").removeClass("active"),$(this).addClass("active")}),$(".featured__filter").length>0){var i=document.querySelector(".featured__filter");mixitup(i)}}),$(".set-bg").each(function(){var i=$(this).data("setbg");$(this).css("background-image","url("+i+")")}),$(".humberger__open").on("click",function(){$(".humberger__menu__wrapper").addClass("show__humberger__menu__wrapper"),$(".humberger__menu__overlay").addClass("active"),$("body").addClass("over_hid")}),$(".humberger__menu__overlay").on("click",function(){$(".humberger__menu__wrapper").removeClass("show__humberger__menu__wrapper"),$(".humberger__menu__overlay").removeClass("active"),$("body").removeClass("over_hid")}),$(".mobile-menu").slicknav({prependTo:"#mobile-menu-wrap",allowParentLinks:!0}),$(".categories__slider").owlCarousel({loop:!0,margin:0,items:4,dots:!1,nav:!0,navText:["<span class='fa fa-angle-left'><span/>","<span class='fa fa-angle-right'><span/>"],animateOut:"fadeOut",animateIn:"fadeIn",smartSpeed:1200,autoHeight:!1,autoplay:!0,responsive:{0:{items:1},480:{items:2},768:{items:3},992:{items:4}}}),$(".hero__categories__all").on("click",function(){$(".hero__categories ul").slideToggle(400)}),$(".latest-product__slider").owlCarousel({loop:!0,margin:0,items:1,dots:!1,nav:!0,navText:["<span class='fa fa-angle-left'><span/>","<span class='fa fa-angle-right'><span/>"],smartSpeed:1200,autoHeight:!1,autoplay:!1}),$(".product__discount__slider").owlCarousel({loop:!0,margin:0,items:3,dots:!1,smartSpeed:1200,autoHeight:!1,autoplay:!0,responsive:{320:{items:1},480:{items:2},768:{items:2},992:{items:3}}}),$(".product__details__pic__slider").owlCarousel({loop:!0,margin:20,items:4,dots:!0,smartSpeed:1200,autoHeight:!1,autoplay:!0});var t=$(".price-range"),e=$("#minamount"),a=$("#maxamount"),s=t.data("min"),o=t.data("max");t.slider({range:!0,min:s,max:o,values:[s,o],slide:function(i,n){e.val(n.values[0]+"k"),a.val(n.values[1]+"k")}}),e.val(t.slider("values",0)+"k"),a.val(t.slider("values",1)+"k"),$("select").niceSelect(),$(".product__details__pic__slider img").on("click",function(){var i=$(this).data("imgbigurl"),n=$(".product__details__pic__item--large").attr("src");i!=n&&$(".product__details__pic__item--large").attr({src:i})});var l=$(".pro-qty");l.prepend('<span class="dec qtybtn">-</span>'),l.append('<span class="inc qtybtn">+</span>'),l.on("click",".qtybtn",function(){var i=$(this),n=i.parent().find("input").val();if(i.hasClass("inc"))var c=parseFloat(n)+1;else if(n>0)var c=parseFloat(n)-1;else c=0;i.parent().find("input").val(c)})});
